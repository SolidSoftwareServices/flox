@using EI.RP.WebApp.Flows.AppFlows
@using EI.RP.WebApp.Flows.AppFlows.AccountsPaymentConfiguration.Steps
@using EI.RP.WebApp.Infrastructure.Extensions

@model EI.RP.WebApp.Flows.AppFlows.AccountsPaymentConfiguration.Steps.ConfirmationOfChanges.DirectDebitSettingsUpdateConfirmationData

@{
    var pageVariant = 
        Model.ConfirmationViewMode == ConfirmationOfChanges.DirectDebitSettingsUpdateConfirmationData.ConfirmationStepMode.EqualizerSetup 
            ? "-equalizer" 
            : Model.ConfirmationViewMode == ConfirmationOfChanges.DirectDebitSettingsUpdateConfirmationData.ConfirmationStepMode.GasAccountSetUp 
                ? "-gas"
                : "";
}

<main class="help" data-page="direct-debit-confirmation@(pageVariant)">
    <div class="container">
        <div class="portal-details">
            @using (await Html.BeginUiFlowFormAsync(Model))
            {
                @if (Model.ConfirmationViewMode == ConfirmationOfChanges.DirectDebitSettingsUpdateConfirmationData.ConfirmationStepMode.EqualizerSetup)
                {
                    <div class="portal-details__form meter-reading">
                        <h2 data-testid="direct-debit-confirmation-thank-you">Thank you, your Equal Monthly Payment has been successfully set up.</h2>
                        <p>Please note you will continue to receive a separate bill for your account every two months.</p>
                        <p>Your payments will be made automatically every month.</p>
                        <p>
                            You can update your direct debit details at any time in your 
                            <flow-action id="dds_my_profile_bill_pay_optns"
                                         data-testid="direct-debit-confirmation-back-to-edit-direct-debit"
                                         class="btn btn-xs btn--no-before btn--no-after btn--no-padding green d-inline"
                                         action-type="StartFlow"
                                         flow-name="@ResidentialPortalFlowType.Plan"
                                         flow-location="SameContainerAsMe">Plan</flow-action> page.
                        </p>
                        <flow-action id="dds_<_back_to_my_accounts"
                                     data-testid="direct-debit-confirmation-back-to-my-accounts"
                                     class="btn btn-xs btn-xs-back green"
                                     action-type="StartFlow"
                                     flow-name="@ResidentialPortalFlowType.Accounts"
                                     flow-location="NotContained">Back to My Accounts</flow-action>
                    </div>
                }
                else if (Model.ConfirmationViewMode == ConfirmationOfChanges.DirectDebitSettingsUpdateConfirmationData.ConfirmationStepMode.GasAccountSetUp)
                {
                    <h2 data-testid="direct-debit-confirmation-title">Gas Account Set Up & Savings Confirmation</h2>
                    <hr aria-hidden="true" />
                    <div class="portal-details__form meter-reading">
                        <h2 data-testid="direct-debit-confirmation-thank-you">Thank you for choosing to make savings the easy way - by staying with Electric Ireland.</h2>
                        <p>
                            This long term saving is exclusive to our customers so it's great to have you on board.
                            We are creating your new account and in the next four weeks you'll receive your account number.
                            Your new savings will be applied to every Electricity & Gas Bill, every year.
                            <a href="https://electricireland.ie/residential/helpful-links/terms-conditions/residential-electricity-and-gas-pricing" target="_blank">Read T&Cs</a>
                        </p>
                        <flow-action id="dds_<_back_to_my_accounts"
                                     data-testid="direct-debit-confirmation-back-to-my-accounts"
                                     class="btn btn-xs btn-xs-back green"
                                     action-type="StartFlow"
                                     flow-name="@ResidentialPortalFlowType.Accounts"
                                     flow-location="NotContained">Back to My Accounts</flow-action>
                    </div>
                }
                else
                {
                    <h2 data-testid="direct-debit-confirmation-title">Direct Debit Settings Update Confirmation</h2>
                    <hr aria-hidden="true" />
                    <div class="portal-details__form meter-reading">
                        <h2 data-testid="direct-debit-confirmation-thank-you">Thank you, your direct debit setup has been set up.</h2>
                        <p>
                            You have changed your payment method to Direct Debit, your savings will be applied within 12 days.
                            <a href="https://www.electricireland.ie/residential/helpful-links/terms-conditions/residential-electricity-and-gas-pricing" target="_blank">Read T&Cs.</a>
                        </p>
                        <p>
                            Your first Direct Debit payment will be made 14 days after your next bill is issued.
                        </p>
                        <p>
                            To update your Direct Debit details at any time go to your 
                            <flow-action id="dds_my_profile_>_bill_pay_optns"
                                         data-testid="direct-debit-confirmation-back-to-billing-and-payment"
                                         action-type="StartFlow"
                                         flow-name="@ResidentialPortalFlowType.Plan"
                                         flow-location="SameContainerAsMe">Plan</flow-action> page.
                        </p>
                        <flow-action id="dds_<_back_to_my_accounts"
                                     data-testid="direct-debit-confirmation-back-to-my-accounts"
                                     class="btn btn-xs btn-xs-back green"
                                     action-type="StartFlow"
                                     flow-name="@ResidentialPortalFlowType.Accounts"
                                     flow-location="NotContained">Back to My Accounts</flow-action>
                    </div>
                }
            }
        </div>
    </div>
</main>
