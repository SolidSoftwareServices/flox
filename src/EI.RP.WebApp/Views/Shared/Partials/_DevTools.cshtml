@using System.Reflection
@using EI.RP.CoreServices.Azure.Configuration
@using EI.RP.CoreServices.Caching
@using EI.RP.CoreServices.DeliveryPipeline.Environments
@using EI.RP.CoreServices.Platform
@using EI.RP.DataServices.SAP.Clients.Config
@using Ei.Rp.Mvc.Core.Controllers
@using Ei.Rp.Mvc.Core.System
@using EI.RP.WebApp.Controllers
@using EI.RP.WebApp.Infrastructure.Settings
@using Microsoft.AspNetCore.Hosting

@inject IHostingEnvironment HostingEnvironment
@inject ISapSettings SapSettings
@inject ICacheSettings CacheSettings
@inject IUiAppSettings UiSettings
@inject IAzureKeyVaultSettings KeyVaultSettings
@inject IAzureGeneralSettings AzureSettings
@inject IPlatformSettings PlatformSettings

@if (UiSettings.ShowDevelopmentTools)
{
	<div class="devtools" data-dev-tools>
		<div class="devtools-button">
			<a href="#" data-dev-tools-toggle data-dev-tools-toggle-target=".devtools">
				<svg data-dev-tools-toggle-closed viewBox="0 0 511.99989 511" xmlns="http://www.w3.org/2000/svg"><path d="m22.019531 490.550781c.003907.007813.007813.011719.015625.015625.011719.011719.023438.019532.035156.03125 29.257813 29.167969 76.613282 29.28125 106.027344-.132812l127.003906-128.246094c2.941407 2.941406 20.820313 20.730469 128.867188 128.296875 29.3125 29.308594 76.75 29.3125 106.0625 0 .007812-.007813.011719-.011719.019531-.019531.003907-.003906.007813-.003906.007813-.007813.007812-.007812.015625-.019531.023437-.027343 29.191407-29.246094 29.175781-76.785157-.070312-106.03125l-149.90625-149.234376 69.792969-68.699218h36.28125c5.496093 0 10.554687-3.011719 13.179687-7.84375l50.820313-93.570313c3.171874-5.835937 2.125-13.066406-2.574219-17.765625l-42.425781-42.421875c-4.695313-4.699219-11.925782-5.746093-17.765626-2.574219l-93.570312 50.820313c-4.832031 2.625-7.839844 7.683594-7.839844 13.179687v36.167969l-90.804687 89.933594-51.308594-51.640625c13.140625-37.007812 4.929687-79.960938-24.636719-109.527344-31.414062-31.414062-79.441406-39.664062-119.511718-20.519531-4.394532 2.097656-7.492188 6.199219-8.316407 11-.824219 4.796875.734375 9.695313 4.175781 13.140625l49.410157 49.410156-21.210938 21.210938-49.410156-49.410156c-3.445313-3.441407-8.34375-5-13.140625-4.175782-4.800781.824219-8.902344 3.925782-11 8.316406-19.140625 40.070313-10.894531 88.097657 20.519531 119.515626 29.277344 29.277343 72.097657 37.894531 109.460938 24.65625l30.179687 30.375c-4.902344 4.945312-143.226562 144.433593-148.425781 149.679687-29.308594 29.308594-29.316406 76.75 0 106.0625zm84.8125-21.246093c-14.109375 14.109374-34.867187 16.667968-51.304687 8.761718l114.65625-115.773437 21.414062 21.417969zm298.324219-.023438-86.375-85.992188 21.074219-21.074218 116.492187 115.890625c-16.71875 7.941406-37.355468 5.007812-51.191406-8.824219zm63.664062-63.613281c13.839844 13.835937 16.75 34.519531 8.761719 51.25l-116.511719-115.914063 21.351563-21.351562zm-107.660156-107.179688c-6.890625 6.886719-56.9375 56.9375-63.636718 63.636719l-42.519532-42.332031c1.484375-1.480469-11.332031 11.300781 63.722656-63.550781zm14.84375-223.242187 75.882813-41.21875 26.585937 26.582031-41.21875 75.886719h-27.289062c-10.226563-10.226563-24.300782-24.300782-33.960938-33.960938zm-15.050781 54.660156c7.460937 7.460938 13.875 13.878906 21.503906 21.503906-32.539062 31.9375-77.113281 75.707032-85.019531 83.523438l-21.09375-21.230469zm-308.972656 28.621094c-16.960938-16.960938-24.46875-40.707032-21.222657-63.644532l42.4375 42.433594c5.851563 5.855469 15.355469 5.855469 21.210938 0l42.425781-42.425781c5.855469-5.855469 5.855469-15.355469 0-21.210937l-42.433593-42.433594c22.9375-3.253906 46.679687 4.257812 63.644531 21.21875 29.242187 29.242187 29.242187 76.824218 0 106.0625-29.242188 29.242187-76.820313 29.242187-106.0625 0zm115.859375 31.097656c3.980468-2.980469 7.800781-6.269531 11.417968-9.882812 3.585938-3.585938 6.851563-7.375 9.804688-11.320313 46.605469 46.902344 84.761719 85.320313 87.164062 87.722656l-21.210937 21.214844zm23.546875 66.597656 42.382812 42.382813-10.605469 10.605469c-5.867187 5.863281-5.855468 15.382812.019532 21.234374l10.660156 10.609376-21.132812 21.339843c-6.929688-6.929687-56.929688-56.925781-63.570313-63.566406zm-148.148438 149.398438 84.777344-85.492188 20.953125 20.953125-114.613281 115.730469c-7.777344-16.324219-5.292969-37.011719 8.882812-51.191406zm0 0" /></svg>
				<svg data-dev-tools-toggle-open height="329pt" viewBox="0 0 329.26933 329" width="329pt" xmlns="http://www.w3.org/2000/svg"><path d="m194.800781 164.769531 128.210938-128.214843c8.34375-8.339844 8.34375-21.824219 0-30.164063-8.339844-8.339844-21.824219-8.339844-30.164063 0l-128.214844 128.214844-128.210937-128.214844c-8.34375-8.339844-21.824219-8.339844-30.164063 0-8.34375 8.339844-8.34375 21.824219 0 30.164063l128.210938 128.214843-128.210938 128.214844c-8.34375 8.339844-8.34375 21.824219 0 30.164063 4.15625 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921875-2.089844 15.082031-6.25l128.210937-128.214844 128.214844 128.214844c4.160156 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921874-2.089844 15.082031-6.25 8.34375-8.339844 8.34375-21.824219 0-30.164063zm0 0" /></svg>
			</a>
		</div>
		<div class="container">
			<div class="row">
				<div class="col">
					<p class="title">Development tools</p>
					@if (UiSettings.FlowDebuggerIsEnabled)
					{
						<p>
							<a href="@($"{Context.GetBaseUrl()}/flowdebugger/debugger")" target="_blank">Flows Debugger</a>
						</p>
					}
					<p>
						@Html.ActionLink("Test settings", nameof(TestSettingsController.TestSettings), typeof(TestSettingsController).GetNameWithoutSuffix(), htmlAttributes: new { target = "_blank" }, routeValues: null)
					</p>
					<p>
						@Html.ActionLink("See logs", nameof(LogViewController.Index), typeof(LogViewController).GetNameWithoutSuffix(), htmlAttributes: new { target = "_blank" }, routeValues: null)
					</p>
					<p>
						<a href="~/profiler/results-index" target="_blank">Performance profiler results index</a>
					</p>
					<p>
						<a href="~/profiler/results" target="_blank">Performance profiler results</a>
					</p>
					<p>
						@if (PlatformSettings.HealthChecksEnabled)
						{
							<a href="~/healthstatus/loading" target="_blank">Health status</a>
						}
						else
						{
						<p>"Health checks disabled"</p>
					}


						</p>
						<p>
							@Html.ActionLink("Ui Flows", nameof(TestSettingsController.UiFlows), typeof(TestSettingsController).GetNameWithoutSuffix(), htmlAttributes: new { target = "_blank" }, routeValues: null)
						</p>
						<p class="title mt-4">Runtime info</p>
						<p>Environment: @HostingEnvironment.EnvironmentName</p>
						<p>Version: @Assembly.GetEntryAssembly()?.GetName().Version.ToString()</p>
						<p>Sap Endpoint: @SapSettings.SapBaseUrl</p>
						<p>Cache Type: @(CacheSettings.IsCacheEnabled? CacheSettings.CacheProviderType.ToString():"Disabled")</p>
						<p>Cache Preloader Enabled:@(CacheSettings.IsCacheEnabled ? CacheSettings.IsCachePreLoaderEnabled.ToString(): "Caching is Disabled")</p>
						<p>Azure Enabled: @(AzureSettings.IsAzureEnabled)</p>
						<p>Azure KeyVault: @(AzureSettings.IsAzureEnabled ? KeyVaultSettings.KeyVaultUrl : "Disabled")</p>
					</div>
				</div>
			</div>
		</div>
	}
