@using EI.RP.NavigationPrototype.Flows

@using EI.RP.NavigationPrototype.Flows.AppFlows
@using EI.RP.NavigationPrototype.Flows.AppFlows.BlueFlow.FlowDefinitions
@using EI.RP.NavigationPrototype.Flows.AppFlows.BlueFlow.Steps
@using EI.RP.NavigationPrototype.Flows.SharedFlowComponents.Main.SampleInput
@using EI.RP.UiFlows.Core.Flows.Screens.Metadata
@using EI.RP.NavigationPrototype.Infrastructure
@model EI.RP.NavigationPrototype.Flows.AppFlows.BlueFlow.Steps.InitialScreen.InitialScreenScreenModel
@{
	ViewData["Title"] = "BlueFlow::Initial registration";
}
<div id="BlueFlowPage">

	<div class="row">
		<div class="col-md-3">
			<h2>BlueFlow::Step 0</h2>
		</div>
	</div>
	@using (await Html.BeginUiFlowFormAsync( Model))
	{

		<b>Introduce Value('a'-->StepC, numeric-->Errors):</b>
		<div class="row">
			<div class="col-md-3">
				@Html.TextBoxFor(m => m.StepValue1)
				@Html.ValidationMessageFor(m => m.StepValue1)
			</div>
		</div>

		<vc:sample-input screen-model=@(Model)
						 input=@(new InputComponentInput{InputParameter=Model.StringValue})></vc:sample-input>
		<div class="row">
			<div class="col-md-3">
				<flow-action trigger-event=@InitialScreen.StepEvent.Next>Next</flow-action>
				<flow-action trigger-event=@InitialScreen.StepEvent.Reset>Reset</flow-action>
			</div>
		</div>
	}

	<div class="row">
		<div class="col-md-3">
			<flow-action action-type="StartFlow"
						 flow-location="SameContainerAsMe"
						 flow-name="@SampleAppFlowType.GreenFlow">
				open @SampleAppFlowType.GreenFlow.ToString() from sibling
			</flow-action>

		</div>
	</div>
	<div class="row">
		<div class="col-md-3">
			<flow-action
				id="lnkFailInitialization"
				action-type="StartFlow"
						 flow-location="SameContainerAsMe"
						 flow-name=@SampleAppFlowType.BlueFlow
						 flow-parameters=@(new { 
							                 FailOnStep = nameof(FlowInitializer),
							                 FailOnEvent=ScreenLifecycleStage.FlowInitialization

						                 })>
				open @SampleAppFlowType.BlueFlow.ToString() Failing in flow initializer
			</flow-action>

		</div>
	</div>
	<div class="row">
		<div class="col-md-3">
			<flow-action 
				id="lnkFailCreatingStep"
				action-type="StartFlow"
			             flow-location="SameContainerAsMe"
			             flow-name=@SampleAppFlowType.BlueFlow
			             flow-parameters=@(new { 
				                             FailOnStep = BlueFlowScreenName.Step0Screen,
				                             FailOnEvent=ScreenLifecycleStage.CreatingStepData

			                             })>
				open @SampleAppFlowType.BlueFlow.ToString() Failing in InitialScreen.CreateStepData
			</flow-action>

		</div>
	</div>
	<div class="row">
		<div class="col-md-3" id="ValidationSummary">
			@Html.ValidationSummary()
		</div>
	</div>
</div>